#!/usr/bin/env bash
set -euo pipefail

cd "$(git rev-parse --show-toplevel)" || exit
source scripts/include/env-app
source scripts/include/env-container-any

if [ -z ${AWS_DEFAULT_REGION+x} ]; then
  echo "+++ AWS_DEFAULT_REGION is not set, defaulting to us-west-2 +++"
  AWS_DEFAULT_REGION="us-west-2"
fi

export AWS_DEFAULT_REGION

CONTAINER_AWS_OPTIONS=(
  --env AWS_ACCESS_KEY_ID
  --env AWS_SECRET_ACCESS_KEY
  --env AWS_ACCOUNT
  --env AWS_SECURITY_TOKEN
  --env AWS_DEFAULT_REGION
  --env JSII_SILENCE_WARNING_UNTESTED_NODE_VERSION=True
)
CONTAINER_RUN_OPTIONS=(
  --interactive
  --rm
  --tty
  --workdir "${PWD}"
  --user "$(id -u):$(id -g)"
)


export CONTAINER_AWS_OPTIONS
export CONTAINER_RUN_OPTIONS
