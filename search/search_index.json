{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Project Overview","text":"<p>Initial scope for this project is to implement a master server for Quake 2 dedicated servers; whether they are Vanilla, Q2Pro, or R1Q2. Additional plans to include QuakeWorld and Quake 3 support in the near future.</p>"},{"location":"#contact","title":"Contact","text":"<p>Currently handling communication through Discord and trialing GitHub Discussions.</p> <p>Note: The timezone for the maintainer is AEST (UTC+10) so communications will likely be asynchronous wherever you are in the world.</p>"},{"location":"configuration/master/","title":"Master","text":""},{"location":"configuration/protocol_models/","title":"Protocol Models","text":""},{"location":"deployment/aws/","title":"AWS","text":"<p>AWS Deployments are handled with AWS Pipelines.</p>"},{"location":"deployment/aws/#synth","title":"Synth","text":"<p><code>./scripts/cdk/synth</code></p>"},{"location":"deployment/aws/#deploy","title":"Deploy","text":"<p><code>./scripts/cdk/deploy</code></p> <p>Note that this will only deploy the pipeline and not the stack(s) themselves.</p>"},{"location":"deployment/local/","title":"Local Deployment","text":""},{"location":"deployment/local/#containers","title":"Containers","text":"<p>TBD.</p>"},{"location":"deployment/local/#cli","title":"CLI","text":"<p><code>./qs.py server run</code></p>"},{"location":"development/contributing/","title":"Contributing","text":"<p>All contributions welcome; whether they are code changes for new features or to fix bugs, reporting bugs, updating documentation, and any other form of contribution.</p>"},{"location":"development/contributing/#code","title":"Code","text":"<ul> <li>Spaces, no tabs, tab = 4 spaces</li> <li>Pull requests should be related to a singular feature or bug.</li> <li>Readability will be favoured over speed</li> <li>Sufficiently complex code should be commented</li> </ul>"},{"location":"development/contributing/#feature-requests-and-bug-reports","title":"Feature requests and bug reports","text":"<ul> <li>Raise an issue in the GitHub issue tracker master</li> <li>Alternatively reach out in the Discord server</li> </ul>"},{"location":"development/contributing/#license","title":"License","text":"<p>The license for this whole project is the BSD 3-Clause unless otherwise stated.</p>"},{"location":"development/environment/","title":"Environment","text":"<p>All development and testing has been done in Linux. These scripts should work as expected on MacOS and WSL but this has not been confirmed and I cannot test this.</p>"},{"location":"development/environment/#requirements","title":"Requirements","text":"<ul> <li>Docker</li> <li>docker-compose</li> </ul> <p>Additionally a venv to install <code>requirements.test.txt</code></p>"},{"location":"development/environment/#running","title":"Running","text":"<p><code>./scripts/run-master</code></p> <p>This script will:</p> <ul> <li>Build the <code>base</code> container image (<code>docker/Docker.base</code>)</li> <li>Build the <code>master</code> container image (<code>docker/Docker.master</code>)</li> <li>Remove any old docker-compose containers</li> <li>Start <code>master</code> container and <code>dynamodb-local</code> container.</li> </ul> <p>Documentation for dynamodb-local</p>"},{"location":"development/environment/#testing","title":"Testing","text":"<p>All testing is done within containers, with the <code>test</code> container (<code>docker/Docker.test</code>) being the main container used for all testing. Because of this it's built on top of the <code>cdk</code> container (<code>docker/Docker.cdk</code>).</p> <p>Note that none of the test scripts will build the <code>test</code> container by default. This is to avoid building it every time tests are run and help speed up development.</p> <p>To build the <code>test</code> container run <code>./scripts/build-test</code></p>"},{"location":"development/environment/#unit-testing","title":"Unit Testing","text":"<p><code>./scripts/run-test-unit</code></p> <p>This script will:</p> <ul> <li>Run tests within <code>test/unit/master</code> and <code>test/unit/storage</code></li> </ul>"},{"location":"development/environment/#cdk-unit-testing","title":"CDK Unit Testing","text":"<p><code>./scripts/run-test-cdk</code></p> <p>This script will:</p> <ul> <li>Run tests within <code>test/unit/cdk</code></li> </ul> <p>These are split out into their own test suite as they're fairly independent of the main application code.</p>"},{"location":"development/environment/#linting","title":"Linting","text":"<p>To enforce some level of code consistency and quality there are a lot of linting scripts. See <code>./scripts/ci</code> for the complete list.</p> <p>If you're unsure of which linting script to run use <code>./scripts/lint-all</code>.</p> <p>If you're writing code you probably want <code>./scripts/lint-python</code>. Use the individual scripts in <code>./scripts/ci</code> when troubleshooting/resolving specific linting errors.</p> <p>Otherwise for documentation changes there's <code>./scripts/ci/lint-docs</code> to check and <code>./scripts/docs/lint-and-fix-docs</code> to fix any linting issues.</p>"},{"location":"references/external/","title":"External references","text":"<p>The following URLs were invaluable in some way at providing information for getting this project off the ground.</p> <ul> <li>Quake 2 source code</li> <li>Quake 2 source code review</li> <li>Quake Stat</li> <li>Q2Pro source (protocol 36)</li> <li>R1Q2 (protocol 37) documentation</li> <li>R1Q2 source (protocol 37)</li> </ul>"},{"location":"schemas/game_protocol/","title":"GameProtocol schema","text":"<ul> <li>1. [Required] Property <code>GameProtocol &gt; engine</code></li> <li>2. [Required] Property <code>GameProtocol &gt; game</code></li> <li>3. [Optional] Property <code>GameProtocol &gt; encoding</code></li> <li>4. [Optional] Property <code>GameProtocol &gt; active</code></li> <li>5. [Required] Property <code>GameProtocol &gt; versions</code></li> <li>5.1. GameProtocol &gt; versions &gt; versions items</li> <li>6. [Required] Property <code>GameProtocol &gt; headers</code></li> <li>6.1. [Optional] Property <code>GameProtocol &gt; headers &gt; BaseProtocolHeader</code><ul> <li>6.1.1. [Required] Property <code>GameProtocol &gt; headers &gt; BaseProtocolHeader &gt; received</code></li> <li>6.1.2. [Optional] Property <code>GameProtocol &gt; headers &gt; BaseProtocolHeader &gt; response</code></li> <li>6.1.3. [Optional] Property <code>GameProtocol &gt; headers &gt; BaseProtocolHeader &gt; header_type</code></li> </ul> </li> <li>7. [Optional] Property <code>GameProtocol &gt; valid_status_keys</code></li> <li>7.1. GameProtocol &gt; valid_status_keys &gt; valid_status_keys items</li> <li>8. [Required] Property <code>GameProtocol &gt; split</code></li> <li>9. [Optional] Property <code>GameProtocol &gt; newline</code></li> </ul> <p>Title: GameProtocol schema</p> Type <code>object</code> Additional properties [Any type: allowed] Defined in #/definitions/GameProtocol Property Pattern Type Deprecated Definition Title/Description + engine No string No - Engine + game No string No - Game - encoding No string No - Encoding - active No boolean No - Active + versions No array of string No - Versions + headers No object No - Headers - valid_status_keys No array of string No - Valid Status Keys + split No string No - Split - newline No string No - Newline"},{"location":"schemas/game_protocol/#1-required-property-gameprotocol-engine","title":"1. [Required] Property <code>GameProtocol &gt; engine</code>","text":"<p>Title: Engine</p> Type <code>string</code> <p>Description: Short name of the engine; e.g.: idtech2</p>"},{"location":"schemas/game_protocol/#2-required-property-gameprotocol-game","title":"2. [Required] Property <code>GameProtocol &gt; game</code>","text":"<p>Title: Game</p> Type <code>string</code> <p>Description: Short name of the engine; e.g.: quake2</p>"},{"location":"schemas/game_protocol/#3-optional-property-gameprotocol-encoding","title":"3. [Optional] Property <code>GameProtocol &gt; encoding</code>","text":"<p>Title: Encoding</p> Type <code>string</code> Default <code>\"latin1\"</code> <p>Description: Encoding to use when decoding data received</p>"},{"location":"schemas/game_protocol/#4-optional-property-gameprotocol-active","title":"4. [Optional] Property <code>GameProtocol &gt; active</code>","text":"<p>Title: Active</p> Type <code>boolean</code> Default <code>false</code> <p>Description: Whether the protocol is active and will be checked against received headers</p>"},{"location":"schemas/game_protocol/#5-required-property-gameprotocol-versions","title":"5. [Required] Property <code>GameProtocol &gt; versions</code>","text":"<p>Title: Versions</p> Type <code>array of string</code> <p>Description: Versions of the game this protocol applies to</p> Array restrictions Min items N/A Max items N/A Items unicity False Additional items False Tuple validation See below Each item of this array must be Description versions items -"},{"location":"schemas/game_protocol/#51-gameprotocol-versions-versions-items","title":"5.1. GameProtocol &gt; versions &gt; versions items","text":"Type <code>string</code>"},{"location":"schemas/game_protocol/#6-required-property-gameprotocol-headers","title":"6. [Required] Property <code>GameProtocol &gt; headers</code>","text":"<p>Title: Headers</p> Type <code>object</code> Additional properties [Should-conform] <p>Description: Header definitions</p> Property Pattern Type Deprecated Definition Title/Description - additionalProperties No object No In #/definitions/BaseProtocolHeader -"},{"location":"schemas/game_protocol/#61-optional-property-gameprotocol-headers-baseprotocolheader","title":"6.1. [Optional] Property <code>GameProtocol &gt; headers &gt; BaseProtocolHeader</code>","text":"Type <code>object</code> Additional properties [Any type: allowed] Defined in #/definitions/BaseProtocolHeader Property Pattern Type Deprecated Definition Title/Description + received No string No - Received - response No string No - Response - header_type No enum (of string) No - Header Type"},{"location":"schemas/game_protocol/#611-required-property-gameprotocol-headers-baseprotocolheader-received","title":"6.1.1. [Required] Property <code>GameProtocol &gt; headers &gt; BaseProtocolHeader &gt; received</code>","text":"<p>Title: Received</p> Type <code>string</code> Format <code>binary</code> <p>Description: Header received from client/server</p>"},{"location":"schemas/game_protocol/#612-optional-property-gameprotocol-headers-baseprotocolheader-response","title":"6.1.2. [Optional] Property <code>GameProtocol &gt; headers &gt; BaseProtocolHeader &gt; response</code>","text":"<p>Title: Response</p> Type <code>string</code> Format <code>binary</code> <p>Description: Header to prefix response to client/server</p>"},{"location":"schemas/game_protocol/#613-optional-property-gameprotocol-headers-baseprotocolheader-header_type","title":"6.1.3. [Optional] Property <code>GameProtocol &gt; headers &gt; BaseProtocolHeader &gt; header_type</code>","text":"<p>Title: Header Type</p> Type <code>enum (of string)</code> Default <code>\"any\"</code> <p>Description: The type of header this correlates to; e.g.some headers are only applicable to client requests</p> <p>Must be one of:</p> <ul> <li>\"any\"</li> <li>\"server\"</li> <li>\"client\"</li> </ul>"},{"location":"schemas/game_protocol/#7-optional-property-gameprotocol-valid_status_keys","title":"7. [Optional] Property <code>GameProtocol &gt; valid_status_keys</code>","text":"<p>Title: Valid Status Keys</p> Type <code>array of string</code> <p>Description: List of expected keys when parsing a server status</p> Array restrictions Min items N/A Max items N/A Items unicity False Additional items False Tuple validation See below Each item of this array must be Description valid_status_keys items -"},{"location":"schemas/game_protocol/#71-gameprotocol-valid_status_keys-valid_status_keys-items","title":"7.1. GameProtocol &gt; valid_status_keys &gt; valid_status_keys items","text":"Type <code>string</code>"},{"location":"schemas/game_protocol/#8-required-property-gameprotocol-split","title":"8. [Required] Property <code>GameProtocol &gt; split</code>","text":"<p>Title: Split</p> Type <code>string</code> <p>Description: String to split received data</p>"},{"location":"schemas/game_protocol/#9-optional-property-gameprotocol-newline","title":"9. [Optional] Property <code>GameProtocol &gt; newline</code>","text":"<p>Title: Newline</p> Type <code>string</code> Default <code>\"\\n\"</code> <p>Description: String to lines</p> <p>Generated using json-schema-for-humans on 2022-08-20 at 09:20:44 +1000</p>"},{"location":"schemas/protocol_response/","title":"ProtocolResponse schema","text":"<ul> <li>1. [Required] Property <code>ProtocolResponse &gt; game</code></li> <li>2. [Optional] Property <code>ProtocolResponse &gt; active</code></li> <li>3. [Required] Property <code>ProtocolResponse &gt; request_type</code></li> <li>4. [Required] Property <code>ProtocolResponse &gt; response_class</code></li> <li>5. [Optional] Property <code>ProtocolResponse &gt; response</code></li> <li>6. [Optional] Property <code>ProtocolResponse &gt; players</code></li> <li>6.1. ProtocolResponse &gt; players &gt; players items<ul> <li>6.1.1. Property <code>ProtocolResponse &gt; players &gt; players items &gt; additionalProperties</code></li> </ul> </li> <li>7. [Optional] Property <code>ProtocolResponse &gt; details</code></li> <li>7.1. [Optional] Property <code>ProtocolResponse &gt; details &gt; additionalProperties</code><ul> <li>7.1.1. Property <code>ProtocolResponse &gt; details &gt; additionalProperties &gt; anyOf &gt; item 0</code></li> <li>7.1.2. Property <code>ProtocolResponse &gt; details &gt; additionalProperties &gt; anyOf &gt; item 1</code></li> </ul> </li> </ul> <p>Title: ProtocolResponse schema</p> Type <code>object</code> Additional properties [Any type: allowed] Defined in #/definitions/ProtocolResponse Property Pattern Type Deprecated Definition Title/Description + game No string No - Game - active No boolean No - Active + request_type No enum (of string) No - Request Type + response_class No enum (of string) No - Response Class - response No string No - Response - players No array of object No - Players - details No object No - Details"},{"location":"schemas/protocol_response/#1-required-property-protocolresponse-game","title":"1. [Required] Property <code>ProtocolResponse &gt; game</code>","text":"<p>Title: Game</p> Type <code>string</code> <p>Description: Name of the game</p>"},{"location":"schemas/protocol_response/#2-optional-property-protocolresponse-active","title":"2. [Optional] Property <code>ProtocolResponse &gt; active</code>","text":"<p>Title: Active</p> Type <code>boolean</code> Default <code>true</code> <p>Description: False in the event of a server sending a 'shutdown' requestTrue all other times</p>"},{"location":"schemas/protocol_response/#3-required-property-protocolresponse-request_type","title":"3. [Required] Property <code>ProtocolResponse &gt; request_type</code>","text":"<p>Title: Request Type</p> Type <code>enum (of string)</code> <p>Description: Type of request</p> <p>Must be one of:</p> <ul> <li>\"client\"</li> <li>\"server\"</li> <li>\"any\"</li> </ul>"},{"location":"schemas/protocol_response/#4-required-property-protocolresponse-response_class","title":"4. [Required] Property <code>ProtocolResponse &gt; response_class</code>","text":"<p>Title: Response Class</p> Type <code>enum (of string)</code> <p>Description: Response class</p> <p>Must be one of:</p> <ul> <li>\"ping\"</li> <li>\"heartbeat\"</li> <li>\"shutdown\"</li> <li>\"query\"</li> </ul>"},{"location":"schemas/protocol_response/#5-optional-property-protocolresponse-response","title":"5. [Optional] Property <code>ProtocolResponse &gt; response</code>","text":"<p>Title: Response</p> Type <code>string</code> Format <code>binary</code> <p>Description: Response header</p>"},{"location":"schemas/protocol_response/#6-optional-property-protocolresponse-players","title":"6. [Optional] Property <code>ProtocolResponse &gt; players</code>","text":"<p>Title: Players</p> Type <code>array of object</code> <p>Description: List of server players if response belongs to a server</p> Array restrictions Min items N/A Max items N/A Items unicity False Additional items False Tuple validation See below Each item of this array must be Description players items -"},{"location":"schemas/protocol_response/#61-protocolresponse-players-players-items","title":"6.1. ProtocolResponse &gt; players &gt; players items","text":"Type <code>object</code> Additional properties [Should-conform] Property Pattern Type Deprecated Definition Title/Description - additionalProperties No string No - -"},{"location":"schemas/protocol_response/#611-property-protocolresponse-players-players-items-additionalproperties","title":"6.1.1. Property <code>ProtocolResponse &gt; players &gt; players items &gt; additionalProperties</code>","text":"Type <code>string</code>"},{"location":"schemas/protocol_response/#7-optional-property-protocolresponse-details","title":"7. [Optional] Property <code>ProtocolResponse &gt; details</code>","text":"<p>Title: Details</p> Type <code>object</code> Additional properties [Should-conform] <p>Description: Server details if response belongs to a server</p> Property Pattern Type Deprecated Definition Title/Description - additionalProperties No Combination No - -"},{"location":"schemas/protocol_response/#71-optional-property-protocolresponse-details-additionalproperties","title":"7.1. [Optional] Property <code>ProtocolResponse &gt; details &gt; additionalProperties</code>","text":"Type <code>combining</code> Additional properties [Any type: allowed] Any of(Option) item 0 item 1"},{"location":"schemas/protocol_response/#711-property-protocolresponse-details-additionalproperties-anyof-item-0","title":"7.1.1. Property <code>ProtocolResponse &gt; details &gt; additionalProperties &gt; anyOf &gt; item 0</code>","text":"Type <code>string</code>"},{"location":"schemas/protocol_response/#712-property-protocolresponse-details-additionalproperties-anyof-item-1","title":"7.1.2. Property <code>ProtocolResponse &gt; details &gt; additionalProperties &gt; anyOf &gt; item 1</code>","text":"Type <code>integer</code> <p>Generated using json-schema-for-humans on 2022-08-20 at 09:20:44 +1000</p>"},{"location":"usage/clients/","title":"Clients","text":"<p>Clients in this case are end users querying the master server for the server list.</p>"},{"location":"usage/clients/#qstat","title":"Qstat","text":"<p>qstat (aka quakestat) is currently the only client server browser with which this application has been tested. However any other client that allows the user to specify a master server should work.</p> <p>The following command will request the list of servers:</p> <pre><code>quakestat -q2m master.quake.services\n</code></pre> <p>Example output:</p> <pre><code>$ quakestat -q2m master.quake.services\nADDRESS           PLAYERS      MAP   RESPONSE TIME    NAME\nQ2M master.quake.services 1 servers    395 / 0\nQ2S  116.240.207.35:27910   0/8   0/0     q2dm7     14 / 0            quake.services\n</code></pre>"},{"location":"usage/servers/","title":"Servers","text":""},{"location":"usage/servers/#quake-2","title":"Quake 2","text":"<p>Setting the master of a running Quake 2 server:</p> <pre><code>setmaster master.quake.services\n</code></pre> <p>Example output from the above command:</p> <pre><code>setmaster 52.39.209.179\nMaster server at [52.39.209.179]:27900\nSending a ping.\nPing acknowledge from [52.39.209.179]:27900\nSending heartbeat to [192.246.40.37]:27900\nSending heartbeat to [52.39.209.179]:27900\nPing acknowledge from [52.39.209.179]:27900\n</code></pre> <p>Quake 2 will send a ping, and once it receives an acknowledgement, will send a heartbeat.</p> <p>It's recommended that this be set as part of your server config for simplicity along with any other master servers you're using.</p> <p>Warning</p> <p>Always use the hostname <code>master.quake.services</code> and not any of the addresses that it resolves to. The reason for this is that due to the nature of the AWS Load Balancer service those IP addresses may change without notice.</p>"},{"location":"usage/servers/#faq","title":"FAQ","text":"<p>Q: Why is my server also sending a ping to <code>192.246.40.37</code>?</p> <p>A: Because <code>192.246.40.37</code> is the original master server run by id Software that no longer exists. Source</p>"}]}